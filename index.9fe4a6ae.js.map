{"mappings":"oeAAAA,EAAA,SCAA,IAAAC,EAAAD,EAAA,SCAAE,EAAAF,EAAA,S,aAGO,SAASG,GAAaC,MAAEA,EAAKC,aAAEA,EAAYC,YAAEA,EAAWC,UAAEA,EAASC,aAAEA,IAC1E,MAAO,mLAMgCJ,kHAGQ,EAAAF,EAAAO,WAAUF,QAAgBF,EAAaK,MAAM,EAAG,6DAG1D,EAAAC,EAAAC,gBAAeJ,qGAKRF,oBAC/BF,iF,qDDff,MAAMS,EAAY,IAAI,EAAAZ,EAAAa,WAChBC,EAAgBC,SAASC,cAAc,iBAGxC,EAALC,EAAAC,aACA,EAAAD,EAAAE,cAEAC,iBACE,IACE,MAEMC,SAFgBT,EAAUU,uBAEJC,QAGD,IAAvBC,EAAgB,GACpB,MAAMC,EAAeC,GAAOC,KAAKC,MAAMD,KAAKE,SAAWF,KAAKC,MAAMF,IAElE,KAA+B,GAAxBF,EAAcM,QAAa,CAChC,IAAIC,EAAQN,EAAaJ,EAAYS,QACrCN,EAAcQ,KAAKX,EAAYU,IAC/BP,EAAgBA,EAAcS,QAAO,CAACC,EAAGC,EAAGC,IAAQA,EAAIC,QAAQH,IAAMC,G,CAGxE,MAAMG,EAASd,EAAce,QAC3B,CAACC,EAAQC,IAAkBD,EAAStC,EAAauC,IACjD,IAekBD,EAVLF,EAWjBxB,EAAc4B,UAAYF,EATnBG,G,CACL,MAAOC,GACPC,QAAQC,IAAIF,E,CAMhB,IAAwBJ,C,CAHxBO,GASgB,MAAVC,EAAejC,SAASC,cAAc,mBAqF5C,SAAS2B,IACP,MAAQM,OAAQC,GAAenC,SAC5BC,cAAc,SACdmC,kBAAkBC,wBAErBC,OAAOC,SAAS,CACdC,IAAkB,EAAbL,EACLM,SAAU,U,EA1FdpC,iBACE,IACE,MAGMqC,SAHwB7C,EAAU8C,oBAGCnC,QAIzC,IAAKkC,EACH,OAAOE,MACL,iEAKuB,IAAvBC,EAAiB,GAGrB,MAAMC,EAAgBnC,GAAOC,KAAKC,MAAMD,KAAKE,SAAWF,KAAKC,MAAMF,IAEnE,KAAgC,GAAzBkC,EAAe9B,QAAa,CACjC,IAAIC,EAAQ8B,EAAcJ,EAAiB3B,QAC3C8B,EAAe5B,KAAKyB,EAAiB1B,IACrC6B,EAAiBA,EAAe3B,QAC9B,CAACC,EAAGC,EAAGC,IAAQA,EAAIC,QAAQH,IAAMC,G,CAIrC,MAAM2B,EAAiBF,EAAerB,QACpC,CAACC,EAAQuB,IAAmBvB,GAAS,EAAAwB,EAAAC,sBAAqBF,IAC1D,IA+CmBvB,EA5CLsB,EA6ClBd,EAAaN,UAAYF,EAnCHzB,SAASC,cAAc,iBAC/BkD,iBAAiB,SAC7B,SAAsBC,GAE2B,IAA3CC,EAAeC,KAAKC,MAAMC,aAAaC,QAAQ,iBAAmB,GAItB,GAC9CJ,EAAaK,OAAOC,MAAKC,GAASA,EAAMC,KAAOhB,EAAe,GAAGgB,KAItC,YADU/B,QAA7BC,IAAI,oCAI2BsB,EAA1BpC,KAAK4B,GAG4BW,aAAnCM,QAAQ,cAAeR,KAAKS,UAAUV,G,IAMhDzB,G,CACL,MAAOC,GACPC,QAAQC,IAAIF,E,CAOhB,IAAyBJ,C,CAHzBuC,GElIAhF,EAAA,S","sources":["src/index.js","src/js/homeWeekly.js","src/js/catalog-functions/weekly-markup.js","src/js/homeUpcoming.js"],"sourcesContent":["import './js/color-theme';\nimport './js/homeWeekly';\nimport './js/homeUpcoming';\nimport './js/modal';\nimport './js/mobile-menu';\nimport './js/hero';\nimport './js/movie-card';\nimport './js/spiner';\n","import { MoviesAPI } from './MoviesAPI';\nimport { createMovies } from '/src/js/catalog-functions/weekly-markup';\nimport { createUpcomingMovies } from '/src/js/catalog-functions/upcoming-markup';\nimport { onScroll, onToTopBtn } from './scroll';\nimport { addAndRemoveToLocalStorage } from './localStorage';\nimport { openModalMovie } from './modal-window/modal-movie';\n\nconst moviesAPI = new MoviesAPI();\nconst weeklyGallery = document.querySelector('.weekly-list');\n\n// скрол\nonScroll();\nonToTopBtn();\n\nasync function onRenderPage() {\n  try {\n    const respons = await moviesAPI.getTrendMoviesWeeks();\n\n    const responsData = respons.results;\n\n    //  отримуємо три рамдомних фільми\n    let responsMovies = [];\n    const getRandomInt = max => Math.floor(Math.random() * Math.floor(max));\n\n    while (responsMovies.length != 3) {\n      let index = getRandomInt(responsData.length);\n      responsMovies.push(responsData[index]);\n      responsMovies = responsMovies.filter((v, i, arr) => arr.indexOf(v) == i);\n    }\n\n    const markup = responsMovies.reduce(\n      (markup, responsMovies) => markup + createMovies(responsMovies),\n      ''\n    );\n\n    // console.log(markup.length);\n\n    updateNewsList(markup);\n    // скрол\n    scrollPage();\n  } catch (err) {\n    console.log(err);\n  }\n}\nonRenderPage();\n// console.log(onRenderPage());\n\nfunction updateNewsList(markup) {\n  weeklyGallery.innerHTML = markup;\n}\n\n// ===секція \"нові фільми\"===\n\nconst upcomingCard = document.querySelector('.upcoming-cover');\n\nasync function onRenderNewMovie() {\n  try {\n    const responsNewMovie = await moviesAPI.getUpcomingFilms();\n    // console.log(respons);\n\n    const responsDataMovie = responsNewMovie.results;\n    // console.log(responsDataMovie);\n    // console.log(responsData.length);\n\n    if (!responsDataMovie) {\n      return alert(\n        'Вибачте! Нових фільмів не знайдено/Sorry! No new movies found'\n      );\n    }\n\n    // отримуємо один рамдомний фільм\n    let randomNewMovie = [];\n    // console.log(randomNewMovie);\n\n    const getRandomFilm = max => Math.floor(Math.random() * Math.floor(max));\n\n    while (randomNewMovie.length != 1) {\n      let index = getRandomFilm(responsDataMovie.length);\n      randomNewMovie.push(responsDataMovie[index]);\n      randomNewMovie = randomNewMovie.filter(\n        (v, i, arr) => arr.indexOf(v) == i\n      );\n    }\n\n    const markupNewMovie = randomNewMovie.reduce(\n      (markup, randomNewMovie) => markup + createUpcomingMovies(randomNewMovie),\n      ''\n    );\n\n    updateNewMovies(markupNewMovie);\n\n    // setTimeout(function () {\n    // const remindMeBtn = document.querySelector('.upcoming-btn');\n    // remindMeBtn.addEventListener('click', addToLibrary);\n    // function addToLibrary(event) {\n    //   addAndRemoveToLocalStorage('libraryFilm', JSON.stringify(randomNewMovie));\n    // }\n\n    // Додаємо слухача на кнопку Remind me і при кліку на цю кнопку викликаємо функцію addToLibrary (запис в локальне сховище)\n    const remindMeBtn = document.querySelector('.upcoming-btn');\n    remindMeBtn.addEventListener('click', addToLibrary);\n    function addToLibrary(event) {\n      // Отримати поточний список фільмів з локального сховища\n      let libraryFilms = JSON.parse(localStorage.getItem('libraryFilm')) || [];\n      // console.log(libraryFilms.flat());\n      // console.log(randomNewMovie[0].id);\n      // Перевірка чи такого фільму ще немає в Локальному сховищі\n      if (\n        libraryFilms.flat().some(value => value.id === randomNewMovie[0].id)\n      ) {\n        // Якщо фільм вже є, тоді поки що нічого не робимо\n        console.log('Фільм вже додано в Локал Сторідж');\n        return;\n      } else {\n        // console.log('Такого фільму ще немає в Локал Сторідж, додаємо');\n        libraryFilms.push(randomNewMovie); // Додаємо новий запис до масиву.\n      }\n      // Зберегти оновлений список фільмів у локальному сховищі\n      localStorage.setItem('libraryFilm', JSON.stringify(libraryFilms));\n    }\n\n    // }, 2000);\n\n    // скрол\n    scrollPage();\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nonRenderNewMovie();\n// console.log(onRenderPage());\n\nfunction updateNewMovies(markup) {\n  upcomingCard.innerHTML = markup;\n}\n\n//скрол\nfunction scrollPage() {\n  const { height: cardHeight } = document\n    .querySelector('.main')\n    .firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 1,\n    behavior: 'smooth',\n  });\n}\n","import { getGenres } from './catalog-genres-get';\nimport { getStarsRating } from './catalog-rating-get';\n\nexport function createMovies({ title, release_date, poster_path, genre_ids, vote_average }) {\n  return `\n    <li class=\"weekly-item\">\n  <a href=\"#\" class=\"weekly-link\">\n    <div class=\"weekly-wrapper\">\n\n      <div class=\"weekly-info\">\n        <h2 class=\"weekly-info__title\">${title}</h2>\n\n        <div class=\"catalog-list__additional-info\">\n          <p class=\"weekly-info__genres__data\">${getGenres(genre_ids)} | ${release_date.slice(0, 4)}\n        </p>\n\n          <div class=\"weekly-rating\">${getStarsRating(vote_average)}</div>\n        </div>\n      </div>\n\n      <img\n        src=\"https://image.tmdb.org/t/p/w500${poster_path}\"\n        alt=\"${title}\"\n        \n        class=\"weekly-img\"\n      />\n    </div>\n  </a>\n</li>\n`;\n}\n","import { addAndRemoveToLocalStorage } from './localStorage';\n// import { MoviesAPI } from './MoviesAPI';\n// const moviesAPI = new MoviesAPI();\n\n// import { createUpcomingMovies } from '/src/js/catalog-functions/upcoming-markup';\n\n// const upcomingCard = document.querySelector('.upcoming-cover');\n\n// async function onRenderNewMovie() {\n//   try {\n//     const responsNewMovie = await moviesAPI.getUpcomingFilms();\n//     // console.log(respons);\n\n//     const responsDataMovie = responsNewMovie.results;\n//     // console.log(responsDataMovie);\n//     // console.log(responsData.length);\n\n//     // отримуємо один рамдомний фільм\n//     let randomNewMovie = [];\n\n//     const getRandomFilm = max => Math.floor(Math.random() * Math.floor(max));\n\n//     while (randomNewMovie.length != 1) {\n//       let index = getRandomFilm(responsDataMovie.length);\n//       randomNewMovie.push(responsDataMovie[index]);\n//       randomNewMovie = randomNewMovie.filter(\n//         (v, i, arr) => arr.indexOf(v) == i\n//       );\n//     }\n\n//     const markupNewMovie = randomNewMovie.reduce(\n//       (markup, randomNewMovie) => markup + createUpcomingMovies(randomNewMovie),\n//       ''\n//     );\n\n//     updateNewMovies(markupNewMovie);\n//   } catch (err) {\n//     console.log(err);\n//   }\n// }\n\n// onRenderNewMovie();\n// // console.log(onRenderPage());\n\n// function updateNewMovies(markup) {\n//   upcomingCard.innerHTML = markup;\n// }\n"],"names":["parcelRequire","$jtGqB","$horRP","$04666d24fb4a79da$export$f0d49a713b8a9d6f","title","release_date","poster_path","genre_ids","vote_average","getGenres","slice","$1fLxG","getStarsRating","$0015b29ca7009732$var$moviesAPI","MoviesAPI","$0015b29ca7009732$var$weeklyGallery","document","querySelector","$2YGUk","onScroll","onToTopBtn","async","responsData","getTrendMoviesWeeks","results","responsMovies1","getRandomInt","max","Math","floor","random","length","index","push","filter","v","i","arr","indexOf","markup1","reduce","markup","responsMovies","innerHTML","$0015b29ca7009732$var$scrollPage","err","console","log","$0015b29ca7009732$var$onRenderPage","$0015b29ca7009732$var$upcomingCard","height","cardHeight","firstElementChild","getBoundingClientRect","window","scrollBy","top","behavior","responsDataMovie","getUpcomingFilms","alert","randomNewMovie1","getRandomFilm","markupNewMovie","randomNewMovie","$bVDZv","createUpcomingMovies","addEventListener","event","libraryFilms","JSON","parse","localStorage","getItem","flat","some","value","id","setItem","stringify","$0015b29ca7009732$var$onRenderNewMovie"],"version":3,"file":"index.9fe4a6ae.js.map"}